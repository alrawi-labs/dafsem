@using Microsoft.AspNetCore.Identity
@inject SignInManager<Users> SignInManager
@inject UserManager<Users> UserManager
@{
    if (!SignInManager.IsSignedIn(User))
    {
        Context.Response.Redirect("/Account/Login");
        return;
    }

    var user = await UserManager.GetUserAsync(User); // kullanıcın bigilerini al
    var roles = await UserManager.GetRolesAsync(user!); // Kullanıcının rollerini al

}

<li class="nav-item dropdown pe-3">
    <a class="nav-link d-flex align-items-center text-decoration-none" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <!-- User Avatar -->
        <div class="bg-primary text-white rounded-start px-3 py-2 fw-semibold">
            @user.FullName[0].ToString().ToUpper()
        </div>

        <!-- User Name -->
        <div class="border border-start-0 rounded-end px-3 py-2 d-none d-md-inline-flex align-items-center gap-2">
            <span class="text-dark">@(user?.FullName)</span>
            <i class="bi bi-chevron-down small"></i>
        </div>
    </a>

    <!-- End Profile Image Icon -->
    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
        <li class="dropdown-header">
            <h6>@user.Email</h6>
            <span>@roles.FirstOrDefault()</span>
        </li>
        <li>
            <hr class="dropdown-divider">
        </li>

        <li>
            <a class="dropdown-item d-flex align-items-center" asp-action="MyProfile" asp-controller="Adminler">
                <i class="bi bi-person"></i>
                <span>Profilim</span>
            </a>
        </li>

        <li>
            <hr class="dropdown-divider">
        </li>

        <li>
            <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
                <i class="bi bi-question-circle"></i>
                <span>Need Help?</span>
            </a>
        </li>
        <li>
            <hr class="dropdown-divider">
        </li>

        <li>
            <a class="dropdown-item d-flex align-items-center" asp-action="Logout" asp-controller="Account">
                <i class="bi bi-box-arrow-right"></i>
                <span>Logout</span>
            </a>
        </li>

    </ul>

    <!-- End Profile Dropdown Items -->
</li>

<!-- End Profile Nav -->
